{"version":3,"sources":["builtins.js"],"names":[],"mappings":"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","file":"builtins.js","sourcesContent":["const fs = require('fs')\nconst path = require('path')\nconst run = require('./run')\nconst interp = require('./interp')\nconst lib = require('./lib')\nconst chalk = require('chalk')\nconst C = require('./constants')\n\nfunction exists(p) {\n  // warning, this is synchronous\n  try {\n    fs.accessSync(p, fs.F_OK)\n    return true\n  } catch (err) {\n    return false\n  }\n}\n\nexport function makeBuiltins(fsScope) {\n  let variables = {}\n\n  variables['print'] = new lib.Variable(new lib.LFunction(function(args) {\n    console.log(...args.map(arg => {\n      let a = arg.toString() || ''\n      if (a === '<Boolean true>') a = chalk.green('true') // true\n      else if (a === '<Boolean false>') a = chalk.red('false') // false\n      else if (a === '<Function>') a = chalk.magenta(`function`) // function\n      else if (a.substr(0, 8) === '<String ') a = `${a.substr(8, a.length-9)}` // string\n      else if (a.substr(0, 8) === '<Number ') {\n        if (Number(a.substr(8, a.length-9)) % 1 === 0) a = chalk.blue(`${a.substr(8, a.length-9)}`) // integer\n        else a = chalk.blue(`${a.substr(8, a.length-9)}`) // float\n      }\n      return a\n    }))\n  }))\n\n  variables['process'] = new lib.Variable(lib.toLObject({\n    exit: new lib.LFunction(function([code]) {\n      code = code || 0\n      process.exit(code)\n    })\n  }))\n\n  variables['print-debug'] = new lib.Variable(new lib.LFunction(function(args) {\n    console.log(...args)\n  }))\n\n  variables['concat'] = new lib.Variable(new lib.LFunction(function(args) {\n    return lib.toLString(args.map(lib.toJString).join(''))\n  }))\n\n  variables['if'] = new lib.Variable(new lib.LFunction(async function(args) {\n    if (lib.toJBoolean(args[0])) {\n      await lib.call(args[1], [])\n    } else {\n      // optional `else`\n      if (args[2]) lib.call(args[2], [])\n    }\n  }))\n\n  variables['ifel'] = new lib.Variable(new lib.LFunction(function(args) {\n    if (lib.toJBoolean(args[0])) {\n      lib.call(args[1], [])\n    } else {\n      lib.call(args[2], [])\n    }\n  }))\n\n  variables['sleep'] = new lib.Variable(new lib.LFunction(function([time]) {\n    let e = new Date().getTime() + (lib.toJNumber(time) * 1000)\n    while (new Date().getTime() <= e) { /* empty */ }\n  }))\n\n  variables['obj'] = new lib.Variable(new lib.LFunction(function(args) {\n    return new lib.LObject()\n  }))\n\n  variables['array'] = new lib.Variable(new lib.LFunction(function(args) {\n    return new lib.LArray()\n  }))\n\n  variables['+'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) + lib.toJNumber(y))\n  }))\n  variables['add'] = variables['+']\n\n  variables['-'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) - lib.toJNumber(y))\n  }))\n  variables['minus'] = variables['-']\n\n  variables['/'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) / lib.toJNumber(y))\n  }))\n  variables['divide'] = variables['/']\n\n  variables['*'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) * lib.toJNumber(y))\n  }))\n  variables['multiply'] = variables['&']\n  \n  variables['^'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(Math.pow(lib.toJNumber(x), lib.toJNumber(y)))\n  }))\n\n  variables['not'] = new lib.Variable(new lib.LFunction(function([bool]) {\n    return lib.toLBoolean(!lib.toJBoolean(bool))\n  }))\n  variables['!'] = variables['not']\n\n  variables['and'] = new lib.Variable(new lib.LFunction(function([b1, b2]) {\n    return lib.toLBoolean(lib.toJBoolean(b1) && lib.toJBoolean(b2))\n  }))\n  variables['&'] = variables['and']\n\n  variables['or'] = new lib.Variable(new lib.LFunction(function([b1, b2]) {\n    return lib.toLBoolean(lib.toJBoolean(b1) || lib.toJBoolean(b2))\n  }))\n  variables['|'] = variables['or']\n\n  variables['lt'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(lib.toJNumber(x) < lib.toJNumber(y))\n  }))\n  variables['<'] = variables['lt']\n\n  variables['gt'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(lib.toJNumber(x) > lib.toJNumber(y))\n  }))\n  variables['>'] = variables['gt']\n\n  variables['eq'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(lib.toJNumber(x) === lib.toJNumber(y))\n  }))\n  variables['='] = variables['eq']\n\n  variables['is'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(x.toString() === y.toString())\n  }))\n\n  variables['loop'] = new lib.Variable(new lib.LFunction(function([fn]) {\n    while (lib.toJBoolean(lib.call(fn, []))) { /* empty */ }\n  }))\n\n  variables['use'] = new lib.Variable(new lib.LFunction(function([pathStr]) {\n    let p = lib.toJString(pathStr)\n    let locationInBuiltins = `${fsScope}/${p}`\n\n    if (p.substr(0, 1) !== '.') {\n      locationInBuiltins = `${__dirname}/../global-modules/${p}`\n    }\n\n    let ext = path.parse(locationInBuiltins).ext\n\n    if (!ext) {\n      locationInBuiltins += '.tul'\n      ext = '.tul'\n\n      if (!exists(locationInBuiltins)) {\n        locationInBuiltins = `${locationInBuiltins.substr(0, locationInBuiltins.length - 3)}js`\n        ext = '.js'\n      }\n    }\n\n    if (exists(locationInBuiltins)) {\n      if (ext === '.js') {\n        let used = require(locationInBuiltins)(lib, fsScope)\n        //var usedObj = lib.toLObject(used);\n        return used\n      } else if (ext === '.tul') {\n        let program = fs.readFileSync(locationInBuiltins).toString()\n        let result = run.run(program)\n        if ('exports' in result.variables) {\n          return result.variables.exports.value\n        } else {\n          return new lib.LObject()\n        }\n      } else {\n        console.error(\n          chalk.cyan(`use(...)`)\n          +\n          ': '\n          +\n          chalk.red(`Invalid extension ${chalk.yellow(ext)}.`)\n        )\n        process.exit(1)\n      }\n    } else {\n      console.error(\n        chalk.cyan(`use(...)`)\n        +\n        ': '\n        +\n        chalk.red(`Could not find ${chalk.yellow(p)} ${chalk.white.dim('@ '+locationInBuiltins)}.`)\n      )\n      process.exit(1)\n    }\n  }))\n\n  let variableObject = new lib.LObject()\n\n  lib.set(variableObject, 'make', new lib.LFunction(function([env, name, value]) {\n    let v = new lib.Variable(value)\n    env.vars[lib.toJString(name)] = v\n    return v\n  }))\n\n  lib.set(variableObject, 'change', new lib.LFunction(function([variable, newValue]) {\n    variable.value = newValue\n  }))\n\n  lib.set(variableObject, 'value', new lib.LFunction(function([variable]) {\n    return variable.value\n  }))\n\n  lib.set(variableObject, 'from', new lib.LFunction(function([env, name]) {\n    name = lib.toJString(name)\n    let variable = env.vars[name]\n    if (typeof variable === 'undefined') {\n      throw new Error(chalk.red(`Can't access variable ${chalk.cyan(name)} because it doesn't exist!`))\n    } else {\n      return variable\n    }\n  }))\n\n  lib.set(variableObject, 'exists', new lib.LFunction(function([env, name]) {\n    return lib.toLBoolean(env.vars.hasOwnProperty(lib.toJString(name)))\n  }))\n\n  variables['Variable'] = new lib.Variable(variableObject)\n\n  let environmentObject = new lib.LObject()\n\n  lib.set(environmentObject, 'break-to', new lib.LFunction(function([toEnv, fromEnv]) {\n    fromEnv.breakToEnvironment = toEnv\n  }))\n\n  lib.set(environmentObject, 'set-comment', new lib.LFunction(function([env, comment]) {\n    env.comment = lib.toJString(comment)\n  }))\n\n  variables['Environment'] = new lib.Variable(environmentObject)\n\n  variables['set-timeout'] = new lib.Variable(new lib.LFunction(function([fn, ms]) {\n    setTimeout(function() {\n      lib.call(fn, [])\n    }, lib.toJNumber(ms))\n  }))\n\n  Object.keys(variables).map(function(value, index) {\n    if(variables[value]) {\n      if(variables[value].value instanceof lib.LFunction) variables[value].value.builtin = true\n    }\n  })\n\n  return variables\n}\n"],"sourceRoot":"/source/"}