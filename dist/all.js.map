{"version":3,"sources":["builtins.js","constants.js","grammar.js","interp.js","lib.js","run.js","tests.js","builtin_lib/hello.js","builtin_lib/http.js"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["const fs = require('fs')\nconst path = require('path')\nconst run = require('./run')\nconst interp = require('./interp')\nconst lib = require('./lib')\nconst chalk = require('chalk')\nconst C = require('./constants')\n\nfunction exists(p) {\n  // warning, this is synchronous\n  try {\n    fs.accessSync(p, fs.F_OK)\n    return true\n  } catch (err) {\n    return false\n  }\n}\n\nexport function makeBuiltins(fsScope) {\n  let variables = {}\n\n  variables['print'] = new lib.Variable(new lib.LFunction(function(args) {\n    console.log(...args.map(arg => {\n      let a = arg.toString() || ''\n      if (a === '<Boolean true>') a = chalk.green('true') // true\n      else if (a === '<Boolean false>') a = chalk.red('false') // false\n      else if (a === '<Function>') a = chalk.magenta(`function`) // function\n      else if (a.substr(0, 8) === '<String ') a = `${a.substr(8, a.length-9)}` // string\n      else if (a.substr(0, 8) === '<Number ') {\n        if (Number(a.substr(8, a.length-9)) % 1 === 0) a = chalk.blue(`${a.substr(8, a.length-9)}`) // integer\n        else a = chalk.blue(`${a.substr(8, a.length-9)}`) // float\n      }\n      return a\n    }))\n  }))\n\n  variables['process'] = new lib.Variable(lib.toLObject({\n    exit: new lib.LFunction(function([code]) {\n      code = code || 0\n      process.exit(code)\n    })\n  }))\n\n  variables['print-debug'] = new lib.Variable(new lib.LFunction(function(args) {\n    console.log(...args)\n  }))\n\n  variables['concat'] = new lib.Variable(new lib.LFunction(function(args) {\n    return lib.toLString(args.map(lib.toJString).join(''))\n  }))\n\n  variables['if'] = new lib.Variable(new lib.LFunction(function(args) {\n    if (lib.toJBoolean(args[0])) {\n      lib.call(args[1], [])\n    } else {\n      // optional `else`\n      if (args[2]) lib.call(args[2], [])\n    }\n  }))\n\n  variables['ifel'] = new lib.Variable(new lib.LFunction(function(args) {\n    if (lib.toJBoolean(args[0])) {\n      lib.call(args[1], [])\n    } else {\n      lib.call(args[2], [])\n    }\n  }))\n\n  variables['sleep'] = new lib.Variable(new lib.LFunction(function([time]) {\n    let e = new Date().getTime() + (lib.toJNumber(time) * 1000)\n    while (new Date().getTime() <= e) { /* empty */ }\n  }))\n\n  variables['obj'] = new lib.Variable(new lib.LFunction(function(args) {\n    return new lib.LObject()\n  }))\n\n  variables['array'] = new lib.Variable(new lib.LFunction(function(args) {\n    return new lib.LArray()\n  }))\n\n  variables['+'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) + lib.toJNumber(y))\n  }))\n  variables['add'] = variables['+']\n\n  variables['-'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) - lib.toJNumber(y))\n  }))\n  variables['minus'] = variables['-']\n\n  variables['/'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) / lib.toJNumber(y))\n  }))\n  variables['divide'] = variables['/']\n\n  variables['*'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(lib.toJNumber(x) * lib.toJNumber(y))\n  }))\n  variables['multiply'] = variables['&']\n  \n  variables['^'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLNumber(Math.pow(lib.toJNumber(x), lib.toJNumber(y)))\n  }))\n\n  variables['not'] = new lib.Variable(new lib.LFunction(function([bool]) {\n    return lib.toLBoolean(!lib.toJBoolean(bool))\n  }))\n  variables['!'] = variables['not']\n\n  variables['and'] = new lib.Variable(new lib.LFunction(function([b1, b2]) {\n    return lib.toLBoolean(lib.toJBoolean(b1) && lib.toJBoolean(b2))\n  }))\n  variables['&'] = variables['and']\n\n  variables['or'] = new lib.Variable(new lib.LFunction(function([b1, b2]) {\n    return lib.toLBoolean(lib.toJBoolean(b1) || lib.toJBoolean(b2))\n  }))\n  variables['|'] = variables['or']\n\n  variables['lt'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(lib.toJNumber(x) < lib.toJNumber(y))\n  }))\n  variables['<'] = variables['lt']\n\n  variables['gt'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(lib.toJNumber(x) > lib.toJNumber(y))\n  }))\n  variables['>'] = variables['gt']\n\n  variables['eq'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(lib.toJNumber(x) === lib.toJNumber(y))\n  }))\n  variables['='] = variables['eq']\n\n  variables['is'] = new lib.Variable(new lib.LFunction(function([x, y]) {\n    return lib.toLBoolean(x.toString() === y.toString())\n  }))\n\n  variables['loop'] = new lib.Variable(new lib.LFunction(function([fn]) {\n    while (lib.toJBoolean(lib.call(fn, []))) { /* empty */ }\n  }))\n\n  variables['use'] = new lib.Variable(new lib.LFunction(function([pathStr]) {\n    let p = lib.toJString(pathStr)\n    let locationInBuiltins = `${fsScope}/${p}`\n\n    if (p.substr(0, 1) !== '.') {\n      locationInBuiltins = `${__dirname}/../global-modules/${p}`\n    }\n\n    let ext = path.parse(locationInBuiltins).ext\n\n    if (!ext) {\n      locationInBuiltins += '.tul'\n      ext = '.tul'\n\n      if (!exists(locationInBuiltins)) {\n        locationInBuiltins = `${locationInBuiltins.substr(0, locationInBuiltins.length - 3)}js`\n        ext = '.js'\n      }\n    }\n\n    if (exists(locationInBuiltins)) {\n      if (ext === '.js') {\n        let used = require(locationInBuiltins)(lib, fsScope)\n        //var usedObj = lib.toLObject(used);\n        return used\n      } else if (ext === '.tul') {\n        let program = fs.readFileSync(locationInBuiltins).toString()\n        let result = run.run(program)\n        if ('exports' in result.variables) {\n          return result.variables.exports.value\n        } else {\n          return new lib.LObject()\n        }\n      } else {\n        console.error(\n          chalk.cyan(`use(...)`)\n          +\n          ': '\n          +\n          chalk.red(`Invalid extension ${chalk.yellow(ext)}.`)\n        )\n        process.exit(1)\n      }\n    } else {\n      console.error(\n        chalk.cyan(`use(...)`)\n        +\n        ': '\n        +\n        chalk.red(`Could not find ${chalk.yellow(p)} ${chalk.white.dim('@ '+locationInBuiltins)}.`)\n      )\n      process.exit(1)\n    }\n  }))\n\n  let variableObject = new lib.LObject()\n\n  lib.set(variableObject, 'make', new lib.LFunction(function([env, name, value]) {\n    let v = new lib.Variable(value)\n    env.vars[lib.toJString(name)] = v\n    return v\n  }))\n\n  lib.set(variableObject, 'change', new lib.LFunction(function([variable, newValue]) {\n    variable.value = newValue\n  }))\n\n  lib.set(variableObject, 'value', new lib.LFunction(function([variable]) {\n    return variable.value\n  }))\n\n  lib.set(variableObject, 'from', new lib.LFunction(function([env, name]) {\n    name = lib.toJString(name)\n    let variable = env.vars[name]\n    if (typeof variable === 'undefined') {\n      throw new Error(chalk.red(`Can't access variable ${chalk.cyan(name)} because it doesn't exist!`))\n    } else {\n      return variable\n    }\n  }))\n\n  lib.set(variableObject, 'exists', new lib.LFunction(function([env, name]) {\n    return lib.toLBoolean(env.vars.hasOwnProperty(lib.toJString(name)))\n  }))\n\n  variables['Variable'] = new lib.Variable(variableObject)\n\n  variables['set-timeout'] = new lib.Variable(new lib.LFunction(function([fn, ms]) {\n    setTimeout(function() {\n      lib.call(fn, [])\n    }, lib.toJNumber(ms))\n  }))\n\n  Object.keys(variables).map(function(value, index) {\n    if(variables[value]) {\n      if(variables[value].value instanceof lib.LFunction) variables[value].value.builtin = true\n    }\n  })\n\n  return variables\n}\n","let allExports = {}\n\nconst defineConstant = function(name) {\n  allExports[name] = name\n}\n\ndefineConstant('BOOLEAN_PRIM')\ndefineConstant('COMMENT')\ndefineConstant('FUNCTION_CALL')\ndefineConstant('FUNCTION_PRIM')\ndefineConstant('GET_PROP_USING_IDENTIFIER')\ndefineConstant('NUMBER_PRIM')\ndefineConstant('SET_PROP_USING_IDENTIFIER')\ndefineConstant('STRING_PRIM')\ndefineConstant('SHORTHAND_FUNCTION_PRIM')\ndefineConstant('VARIABLE_ASSIGN')\ndefineConstant('VARIABLE_CHANGE')\ndefineConstant('VARIABLE_IDENTIFIER')\n\n// Characters that can't be used as parts of identifiers.\nallExports.SPECIAL_CHARS = '(){}\\'\" .:;#'\n// allExports.SPECIAL_CHARS = ['(',')','{','}','=>',\"'\",'\"','.',':',';','#']\n\n// Words that can't be used as identifiers.\nallExports.KEYWORDS = ['true', 'false', '=>', '->', 'async']\n\nmodule.exports = allExports\n","// Generated automatically by nearley\n// http://github.com/Hardmath123/nearley\n(function () {\nfunction id(x) {return x[0]; }\n\nvar C = require('./constants');\n\nvar ReturnNothing = function(d, l, r) {\n  return null;\n};\n\nvar JoinRecursive = function(a) {\n  // not really sure how this works but it's magic and fixes everything\n  // todo: figure out how it works\n  var last = a[a.length - 1];\n  return [a[0], ...last];\n};\n\nvar grammar = {\n    ParserRules: [\n    {\"name\": \"_$ebnf$1\", \"symbols\": []},\n    {\"name\": \"_$ebnf$1\", \"symbols\": [\"wschar\", \"_$ebnf$1\"], \"postprocess\": function arrconcat(d) {return [d[0]].concat(d[1]);}},\n    {\"name\": \"_\", \"symbols\": [\"_$ebnf$1\"], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"__$ebnf$1\", \"symbols\": [\"wschar\"]},\n    {\"name\": \"__$ebnf$1\", \"symbols\": [\"wschar\", \"__$ebnf$1\"], \"postprocess\": function arrconcat(d) {return [d[0]].concat(d[1]);}},\n    {\"name\": \"__\", \"symbols\": [\"__$ebnf$1\"], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"wschar\", \"symbols\": [/[ \\t\\n\\v\\f]/], \"postprocess\": id},\n    {\"name\": \"Program$ebnf$1$subexpression$1\", \"symbols\": [\"_Program\", \"_\"]},\n    {\"name\": \"Program$ebnf$1\", \"symbols\": [\"Program$ebnf$1$subexpression$1\"], \"postprocess\": id},\n    {\"name\": \"Program$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"Program\", \"symbols\": [\"_\", \"Program$ebnf$1\"], \"postprocess\": function(d) { return d[1] ? d[1][0] : [] }},\n    {\"name\": \"_Program\", \"symbols\": [\"Command\", \"_\", \"CommandSeparator\", \"_\", \"_Program\"], \"postprocess\": JoinRecursive},\n    {\"name\": \"_Program\", \"symbols\": [\"Command\", \"_\", \"CommandSeparator\"], \"postprocess\": function(d) { return [d[0]] }},\n    {\"name\": \"_Program\", \"symbols\": [\"Comment\", \"_\", \"_Program\"], \"postprocess\": function(d) { return d[2] }},\n    {\"name\": \"_Program\", \"symbols\": [\"Command\"]},\n    {\"name\": \"_Program\", \"symbols\": [\"Comment\"]},\n    {\"name\": \"CommandSeparator\", \"symbols\": [{\"literal\":\";\"}]},\n    {\"name\": \"Command\", \"symbols\": [\"Expression\"]},\n    {\"name\": \"Command\", \"symbols\": [\"SetPropertyUsingIdentifier\"]},\n    {\"name\": \"Command\", \"symbols\": [\"VariableAssign\"]},\n    {\"name\": \"Command\", \"symbols\": [\"VariableChange\"]},\n    {\"name\": \"VariableAssign$string$1\", \"symbols\": [{\"literal\":\"=\"}, {\"literal\":\">\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"VariableAssign\", \"symbols\": [\"Identifier\", \"_\", \"VariableAssign$string$1\", \"_\", \"Expression\"], \"postprocess\": function(d) { return [C.VARIABLE_ASSIGN, d[0], d[4]] }},\n    {\"name\": \"VariableChange$string$1\", \"symbols\": [{\"literal\":\"-\"}, {\"literal\":\">\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"VariableChange\", \"symbols\": [\"Identifier\", \"_\", \"VariableChange$string$1\", \"_\", \"Expression\"], \"postprocess\": function(d) { return [C.VARIABLE_CHANGE, d[0], d[4]] }},\n    {\"name\": \"Expression\", \"symbols\": [\"_Expression\"], \"postprocess\": function(d) { return d[0][0] }},\n    {\"name\": \"_Expression\", \"symbols\": [\"CallFunctionExpression\"]},\n    {\"name\": \"_Expression\", \"symbols\": [\"CallFunctionSurroundExpression\"]},\n    {\"name\": \"_Expression\", \"symbols\": [\"GetPropertyUsingIdentifierExpression\"]},\n    {\"name\": \"_Expression\", \"symbols\": [\"FunctionLiteral\"]},\n    {\"name\": \"_Expression\", \"symbols\": [\"StringExpression\"]},\n    {\"name\": \"_Expression\", \"symbols\": [\"BooleanExpression\"]},\n    {\"name\": \"_Expression\", \"symbols\": [\"NumberExpression\"]},\n    {\"name\": \"_Expression\", \"symbols\": [\"VariableGetExpression\"]},\n    {\"name\": \"SetPropertyUsingIdentifier\", \"symbols\": [\"Expression\", \"_\", {\"literal\":\".\"}, \"_\", \"Identifier\", \"_\", {\"literal\":\">\"}, \"_\", \"Expression\"], \"postprocess\": function(d) { return [C.SET_PROP_USING_IDENTIFIER, d[0], d[4], d[8]] }},\n    {\"name\": \"GetPropertyUsingIdentifierExpression\", \"symbols\": [\"Expression\", \"_\", {\"literal\":\".\"}, \"_\", \"Identifier\"], \"postprocess\": function(d) { return [C.GET_PROP_USING_IDENTIFIER, d[0], d[4]] }},\n    {\"name\": \"FunctionLiteral$ebnf$1$subexpression$1$string$1\", \"symbols\": [{\"literal\":\"a\"}, {\"literal\":\"s\"}, {\"literal\":\"y\"}, {\"literal\":\"n\"}, {\"literal\":\"c\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"FunctionLiteral$ebnf$1$subexpression$1\", \"symbols\": [\"FunctionLiteral$ebnf$1$subexpression$1$string$1\", \"_\"]},\n    {\"name\": \"FunctionLiteral$ebnf$1\", \"symbols\": [\"FunctionLiteral$ebnf$1$subexpression$1\"], \"postprocess\": id},\n    {\"name\": \"FunctionLiteral$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"FunctionLiteral$ebnf$2$subexpression$1\", \"symbols\": [\"ArgumentList\", \"_\"]},\n    {\"name\": \"FunctionLiteral$ebnf$2\", \"symbols\": [\"FunctionLiteral$ebnf$2$subexpression$1\"], \"postprocess\": id},\n    {\"name\": \"FunctionLiteral$ebnf$2\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"FunctionLiteral\", \"symbols\": [\"FunctionLiteral$ebnf$1\", \"FunctionLiteral$ebnf$2\", \"CodeBlock\"], \"postprocess\": function(d) { return [C.FUNCTION_PRIM, d[1] ? d[1][0] : [], d[2], !!d[0]] }},\n    {\"name\": \"ArgumentList$ebnf$1\", \"symbols\": [\"ArgumentListContents\"], \"postprocess\": id},\n    {\"name\": \"ArgumentList$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"ArgumentList\", \"symbols\": [{\"literal\":\"(\"}, \"_\", \"ArgumentList$ebnf$1\", \"_\", {\"literal\":\")\"}], \"postprocess\": function(d) { return d[2] ? d[2] : [] }},\n    {\"name\": \"ArgumentListContents\", \"symbols\": [\"Argument\", \"_\", {\"literal\":\",\"}, \"_\", \"ArgumentListContents\"], \"postprocess\": JoinRecursive},\n    {\"name\": \"ArgumentListContents\", \"symbols\": [\"Argument\"]},\n    {\"name\": \"Argument\", \"symbols\": [\"Identifier\"], \"postprocess\": function(d) { return {type: \"normal\", name: d[0]} }},\n    {\"name\": \"Argument$string$1\", \"symbols\": [{\"literal\":\"u\"}, {\"literal\":\"n\"}, {\"literal\":\"e\"}, {\"literal\":\"v\"}, {\"literal\":\"a\"}, {\"literal\":\"l\"}, {\"literal\":\"u\"}, {\"literal\":\"a\"}, {\"literal\":\"t\"}, {\"literal\":\"e\"}, {\"literal\":\"d\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"Argument\", \"symbols\": [\"Argument$string$1\", \"__\", \"Identifier\"], \"postprocess\": function(d) { return {type: \"unevaluated\", name: d[2]} }},\n    {\"name\": \"CodeBlock\", \"symbols\": [{\"literal\":\"{\"}, \"Program\", {\"literal\":\"}\"}], \"postprocess\": function(d) { return d[1] }},\n    {\"name\": \"ShorthandFunctionLiteral\", \"symbols\": [\"ArgumentList\", \"_\", {\"literal\":\":\"}, \"_\", \"Expression\"], \"postprocess\": function(d) { return [C.SHORTHAND_FUNCTION_PRIM, d[0], d[4]] }},\n    {\"name\": \"VariableGetExpression\", \"symbols\": [\"Identifier\"], \"postprocess\": function(d) { return [C.VARIABLE_IDENTIFIER, d[0]] }},\n    {\"name\": \"CallFunctionExpression\", \"symbols\": [\"Expression\", \"_\", \"PassedArgumentList\"], \"postprocess\":  function(d) {\n        return [C.FUNCTION_CALL, d[0], d[2]] } },\n    {\"name\": \"PassedArgumentList$ebnf$1\", \"symbols\": [\"PassedArgumentListContents\"], \"postprocess\": id},\n    {\"name\": \"PassedArgumentList$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"PassedArgumentList\", \"symbols\": [{\"literal\":\"(\"}, \"_\", \"PassedArgumentList$ebnf$1\", \"_\", {\"literal\":\")\"}], \"postprocess\": function(d) { return d[2] ? d[2] : [] }},\n    {\"name\": \"PassedArgumentListContents\", \"symbols\": [\"Expression\", \"_\", {\"literal\":\",\"}, \"_\", \"PassedArgumentListContents\"], \"postprocess\": JoinRecursive},\n    {\"name\": \"PassedArgumentListContents\", \"symbols\": [\"Expression\"]},\n    {\"name\": \"CallFunctionSurroundExpression$ebnf$1\", \"symbols\": []},\n    {\"name\": \"CallFunctionSurroundExpression$ebnf$1$subexpression$1\", \"symbols\": [\"Expression\", \"__\"]},\n    {\"name\": \"CallFunctionSurroundExpression$ebnf$1\", \"symbols\": [\"CallFunctionSurroundExpression$ebnf$1$subexpression$1\", \"CallFunctionSurroundExpression$ebnf$1\"], \"postprocess\": function arrconcat(d) {return [d[0]].concat(d[1]);}},\n    {\"name\": \"CallFunctionSurroundExpression\", \"symbols\": [{\"literal\":\"(\"}, \"Expression\", \"__\", \"Expression\", \"__\", \"CallFunctionSurroundExpression$ebnf$1\", \"Expression\", \"_\", {\"literal\":\")\"}], \"postprocess\":  function(d) {\n          return [ C.FUNCTION_CALL, d[3], [d[1]].concat(d[5].map(a => a[0])).concat([d[6]]) ];\n        } },\n    {\"name\": \"BooleanExpression\", \"symbols\": [\"_BooleanExpression\"], \"postprocess\": function(d) { return [\"BOOLEAN_PRIM\", d[0][0] === \"true\"] }},\n    {\"name\": \"_BooleanExpression$string$1\", \"symbols\": [{\"literal\":\"t\"}, {\"literal\":\"r\"}, {\"literal\":\"u\"}, {\"literal\":\"e\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"_BooleanExpression\", \"symbols\": [\"_BooleanExpression$string$1\"]},\n    {\"name\": \"_BooleanExpression$string$2\", \"symbols\": [{\"literal\":\"f\"}, {\"literal\":\"a\"}, {\"literal\":\"l\"}, {\"literal\":\"s\"}, {\"literal\":\"e\"}], \"postprocess\": function joiner(d) {return d.join('');}},\n    {\"name\": \"_BooleanExpression\", \"symbols\": [\"_BooleanExpression$string$2\"]},\n    {\"name\": \"StringExpression\", \"symbols\": [\"_StringExpression\"], \"postprocess\": function(d) { return [C.STRING_PRIM, d[0][1]] }},\n    {\"name\": \"_StringExpression\", \"symbols\": [{\"literal\":\"\\\"\"}, \"StringExpressionDoubleContents\", {\"literal\":\"\\\"\"}]},\n    {\"name\": \"_StringExpression\", \"symbols\": [{\"literal\":\"'\"}, \"StringExpressionSingleContents\", {\"literal\":\"'\"}]},\n    {\"name\": \"StringExpressionDoubleContents$ebnf$1\", \"symbols\": []},\n    {\"name\": \"StringExpressionDoubleContents$ebnf$1\", \"symbols\": [\"DoubleStringValidCharacter\", \"StringExpressionDoubleContents$ebnf$1\"], \"postprocess\": function arrconcat(d) {return [d[0]].concat(d[1]);}},\n    {\"name\": \"StringExpressionDoubleContents\", \"symbols\": [\"StringExpressionDoubleContents$ebnf$1\"], \"postprocess\": function(d) { return d[0].join('') }},\n    {\"name\": \"DoubleStringValidCharacter\", \"symbols\": [\"EscapeCode\"]},\n    {\"name\": \"DoubleStringValidCharacter\", \"symbols\": [\"GenericValidCharacter\"], \"postprocess\": \n        function(data, location, reject) {\n          if (data[0][0] === '\"') return reject;\n          else return data[0][0];\n        }\n        },\n    {\"name\": \"StringExpressionSingleContents$ebnf$1\", \"symbols\": []},\n    {\"name\": \"StringExpressionSingleContents$ebnf$1\", \"symbols\": [\"SingleStringValidCharacter\", \"StringExpressionSingleContents$ebnf$1\"], \"postprocess\": function arrconcat(d) {return [d[0]].concat(d[1]);}},\n    {\"name\": \"StringExpressionSingleContents\", \"symbols\": [\"StringExpressionSingleContents$ebnf$1\"], \"postprocess\": function(d) { return d[0].join('') }},\n    {\"name\": \"SingleStringValidCharacter\", \"symbols\": [\"EscapeCode\"]},\n    {\"name\": \"SingleStringValidCharacter\", \"symbols\": [\"GenericValidCharacter\"], \"postprocess\": \n        function(data, location, reject) {\n          if (data[0][0] === '\\'') return reject;\n          else return data[0][0];\n        }\n        },\n    {\"name\": \"EscapeCode$subexpression$1\", \"symbols\": [/./]},\n    {\"name\": \"EscapeCode$subexpression$1\", \"symbols\": [{\"literal\":\"\\n\"}]},\n    {\"name\": \"EscapeCode\", \"symbols\": [{\"literal\":\"\\\\\"}, \"EscapeCode$subexpression$1\"], \"postprocess\": function(d) { return d[1][0]; }},\n    {\"name\": \"NumberExpression\", \"symbols\": [\"_Number\"], \"postprocess\": function(d) { return [C.NUMBER_PRIM, d[0]] }},\n    {\"name\": \"_Number$ebnf$1\", \"symbols\": [{\"literal\":\"-\"}], \"postprocess\": id},\n    {\"name\": \"_Number$ebnf$1\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"_Number$ebnf$2$subexpression$1\", \"symbols\": [\"Digits\", {\"literal\":\".\"}]},\n    {\"name\": \"_Number$ebnf$2\", \"symbols\": [\"_Number$ebnf$2$subexpression$1\"], \"postprocess\": id},\n    {\"name\": \"_Number$ebnf$2\", \"symbols\": [], \"postprocess\": function(d) {return null;}},\n    {\"name\": \"_Number\", \"symbols\": [\"_Number$ebnf$1\", \"_Number$ebnf$2\", \"Digits\"], \"postprocess\":  function(d) {\n          var result = \"\";\n        \n          if (d[1]) {\n            result = d[1][0] + \".\" + result;\n          }\n        \n          result = result + d[2];\n        \n          if (d[0] === \"-\") {\n            result = \"-\" + result;\n          }\n        \n          return parseFloat(result);\n        } },\n    {\"name\": \"Digits$ebnf$1\", \"symbols\": [/[0-9]/]},\n    {\"name\": \"Digits$ebnf$1\", \"symbols\": [/[0-9]/, \"Digits$ebnf$1\"], \"postprocess\": function arrconcat(d) {return [d[0]].concat(d[1]);}},\n    {\"name\": \"Digits\", \"symbols\": [\"Digits$ebnf$1\"], \"postprocess\": function(d) { return d[0].join('') }},\n    {\"name\": \"Identifier$ebnf$1\", \"symbols\": [\"GenericValidIdentifierCharacter\"]},\n    {\"name\": \"Identifier$ebnf$1\", \"symbols\": [\"GenericValidIdentifierCharacter\", \"Identifier$ebnf$1\"], \"postprocess\": function arrconcat(d) {return [d[0]].concat(d[1]);}},\n    {\"name\": \"Identifier\", \"symbols\": [\"Identifier$ebnf$1\"], \"postprocess\": \n        function(data, location, reject) {\n          var id = data[0].join('');\n          if (/[0-9]/.test(id[0])) {\n            return reject;\n          }\n          if (C.KEYWORDS.indexOf(id) === -1) {\n            return id;\n          }\n          return reject;\n        }\n        },\n    {\"name\": \"GenericValidIdentifierCharacter\", \"symbols\": [/./], \"postprocess\": \n        function(data, location, reject) {\n          //console.log(data[0], location)\n          return data[0] && C.SPECIAL_CHARS.indexOf(data[0]) === -1 ? data[0] : reject;\n        }\n        },\n    {\"name\": \"GenericValidCharacter\", \"symbols\": [/./], \"postprocess\": \n        function(data, location, reject) {\n          return data[0] === '\\\\' ? reject : data\n        }\n        },\n    {\"name\": \"Comment$ebnf$1\", \"symbols\": []},\n    {\"name\": \"Comment$ebnf$1\", \"symbols\": [/[^#]/, \"Comment$ebnf$1\"], \"postprocess\": function arrconcat(d) {return [d[0]].concat(d[1]);}},\n    {\"name\": \"Comment\", \"symbols\": [{\"literal\":\"#\"}, \"Comment$ebnf$1\", {\"literal\":\"#\"}], \"postprocess\": function(d) { return [C.COMMENT] }}\n]\n  , ParserStart: \"Program\"\n}\nif (typeof module !== 'undefined'&& typeof module.exports !== 'undefined') {\n   module.exports = grammar;\n} else {\n   window.grammar = grammar;\n}\n})();\n","const C = require('./constants')\nconst lib = require('./lib')\nconst chalk = require('chalk')\nconst builtins = require('./builtins')\n\nexport async function evaluateExpression(expression, environment) {\n  // console.log('evaluating expression', expression)\n  if (expression[0] === C.COMMENT) {\n    return\n  } else if (expression instanceof Array &&\n             expression.every(e => e instanceof Array)) {\n    // console.log('Fo...')\n    const ret = await evaluateEachExpression(variables, expression)\n    // console.log('Ba.', ret)\n    return ret\n  } if (expression[0] === C.VARIABLE_IDENTIFIER && expression[1] === 'environment') {\n    /*\n    const env = new lib.LEnvironment()\n    env.addVars(variables)\n    return env\n    */\n    return environment\n  } else if (expression[0] === C.FUNCTION_CALL) {\n    // Call a function: \"function(arg1, arg2, arg3...)\"\n\n    // Get the function and argument expressions from the expression list.\n    const fnExpression = expression[1]\n    const argExpressions = expression[2]\n\n    // Evaluate the function expression to get the actual function.\n    const fn = await evaluateExpression(fnExpression, variables)\n    const varName = fnExpression[1]\n\n    if (!(fn instanceof lib.LFunction)) {\n      throw new Error(`${chalk.cyan(varName)} is not a function`)\n    }\n\n    fn.argumentScope = variables\n    const args = argExpressions\n    const takingArgs = fn.paramaterList || []\n\n    if (args.length !== takingArgs.length && !fn.builtin) {\n      throw new Error(`Function ${chalk.cyan(varName)} expects ${chalk.bold(takingArgs.length)} arguments, was called with ${chalk.bold(args.length)}`)\n    }\n\n    // Use lib.call to call the function with the evaluated arguments.\n    return await lib.call(fn, args)\n  } else if (expression[0] === C.VARIABLE_IDENTIFIER) {\n    // Get a variable: \"name\"\n\n    // Get the name from the expression list.\n    const name = expression[1]\n\n    // console.log(`Getting variable ${name}...`)\n    // console.log(name in variables)\n\n    // Return the variable's value, or, if the variable doesn't exist, throw an\n    // error.\n    if (name in variables) {\n      // console.log('Return:', variables[name])\n      const ret = variables[name].value\n      return ret\n    } else {\n      throw new Error(`${chalk.cyan(name)} is not defined`)\n    }\n  } else if (expression[0] === C.VARIABLE_ASSIGN) {\n    // Set a variable to a value: \"name => value\"\n\n    // Get the name and value expression from the expression list.\n    const name = expression[1]\n    const valueExpression = expression[2]\n\n    // console.log(`Setting variable ${name}...`)\n\n    // Evaluate the value of the variable.\n    const value = await evaluateExpression(valueExpression, variables)\n\n    // console.log(`..value is ${value}`)\n\n    // Set the variable in the variables object to a new variable with the\n    // evaluated value.\n    variables[name] = new lib.Variable(value)\n    return\n  } else if (expression[0] === C.VARIABLE_CHANGE) {\n    // Change a variable to a new value: \"name -> newValue\"\n\n    // Get the name and value expression from the expression list.\n    const name = expression[1]\n    const valueExpression = expression[2]\n\n    // Evaluate the new value of the variable.\n    const value = await evaluateExpression(valueExpression, variables)\n\n    // Change the value of the already defined variable.\n    variables[name].value = value\n    return\n  } else if (expression[0] === C.FUNCTION_PRIM) {\n    // A function literal: \"[async] [(arg1, arg2, arg3...)] { code }\"\n\n    // Get the code and paramaters from the expression list.\n    const paramaters = expression[1]\n    const code = expression[2]\n    const isAsync = expression[3]\n\n    // Create the function using the given code.\n    const fn = new lib.LFunction(code)\n\n    // Set the scope variables for the function to a copy of the current\n    // variables.\n    fn.setScopeVariables(Object.assign({}, variables))\n\n    // Set the paramaters for the function to the paramaters taken from the\n    // expression list.\n    fn.setParamaters(paramaters)\n\n    fn.isAsynchronous = isAsync\n\n    // Return the function.\n    return fn\n  } else if (expression[0] === C.SHORTHAND_FUNCTION_PRIM) {\n    const paramaters = expression[1]\n    const codeExpression = expression[2]\n    const fn = new lib.LFunction(codeExpression)\n    fn.isShorthand = true\n    fn.setScopeVariables(Object.assign({}, variables))\n    fn.setParamaters(paramaters)\n    return fn\n  } else if (expression[0] === C.STRING_PRIM) {\n    // String literal: \"contents\"\n\n    // Get string from expression list.\n    const string = expression[1]\n\n    // Convert string to a language-usable string, and return.\n    return lib.toLString(string)\n  } else if (expression[0] === C.BOOLEAN_PRIM) {\n    // Boolean literal: true/false\n\n    // Get boolean value from expression list.\n    const bool = expression[1]\n\n    // Convert boolean value to a language-usable boolean, and return.\n    return lib.toLBoolean(bool)\n  } else if (expression[0] === C.NUMBER_PRIM) {\n    // Number primitive: 1, 2, 3, 4, 7.25, -3, etc.\n\n    // Get number value from expression list.\n    const number = expression[1]\n\n    // Convert number value to a language-usable number, and return.\n    return lib.toLNumber(number)\n  } else if (expression[0] === C.SET_PROP_USING_IDENTIFIER) {\n    // Set a property of an object using an identifier literal:\n    // \"obj.key > value\"\n\n    // Get object expression, key, and value expression from expression list.\n    const objExpression = expression[1]\n    const key = expression[2]\n    const valueExpression = expression[3]\n\n    // Evaluate the object and value expressions.\n    const obj = await evaluateExpression(objExpression, variables)\n    const value = await evaluateExpression(valueExpression, variables)\n\n    // Use lib.set to set the property of the evaluated object.\n    lib.set(obj, key, value)\n    return\n  } else if (expression[0] === C.GET_PROP_USING_IDENTIFIER) {\n    // Get a property of an object using an identifier literal: \"obj.key\"\n\n    // Get object expression and key from the expression list.\n    const objExpression = expression[1]\n    const key = expression[2]\n\n    // Evaluate the object expression.\n    const obj = await evaluateExpression(objExpression, variables)\n\n    // Get the value from lib.get.\n    const value = lib.get(obj, key)\n\n    // Return the gotten value.\n    return value\n  } else {\n    throw new Error(`Invalid expression: ${chalk.cyan(expression[0])}`)\n  }\n}\n\nexport async function evaluateGetPropUsingIdentifier(variables, [_, objExpr, key]) {\n  let obj = await evaluateExpression(objExpr, variables)\n  return lib.get(obj, key)\n}\n\nexport async function evaluateEachExpression(variables, expressions) {\n  let results = []\n  for (let expression of expressions) {\n    results.push(await evaluateExpression(expression, variables))\n  }\n  return results\n}\n\nexport async function interp(ast, dir) {\n  if (ast) {\n    const environment = new lib.LEnvironment()\n\n    environment.addVars(builtins.makeBuiltins(dir))\n\n    let result = await evaluateEachExpression(environment, ast)\n\n    return { result, environment }\n  } else {\n    throw new Error('Haha, you didn\\'t pass me a tree!')\n  }\n}\n","const interp = require('./interp')\nconst C = require('./constants')\nconst equal = require('deep-equal')\n\nexport class StringPrim {\n  constructor(str) {\n    this.str = str\n  }\n\n  set str(str) {\n    this._str = String(str)\n  }\n\n  get str() {\n    return String(this._str)\n  }\n\n  toString() {\n    return '<String ' + this.str + '>'\n  }\n}\n\nexport class BooleanPrim {\n  constructor(bool) {\n    this.bool = bool\n  }\n\n  set bool(bool) {\n    this._bool = Boolean(bool)\n  }\n\n  get bool() {\n    return Boolean(this._bool)\n  }\n\n  valueOf() {\n    return this.bool\n  }\n\n  toString() {\n    return `<Boolean ${this.bool}>`\n  }\n}\n\nexport class NumberPrim {\n  constructor(num) {\n    this.num = num\n  }\n\n  set num(num) {\n    this._num = Number(num)\n  }\n\n  get num() {\n    return Number(this._num)\n  }\n\n  valueOf() {\n    return this.num\n  }\n\n  toString() {\n    return '<Number ' + this.num + '>'\n  }\n}\n\n// Converting language primatives to JS prims ---------------------------------\n\nexport function toJString(str) {\n  if (str instanceof StringPrim) {\n    return str.str\n  } else {\n    return String(str)\n  }\n}\n\nexport function toJBoolean(bool) {\n  if (bool instanceof BooleanPrim && bool.bool === true) {\n    return true\n  } else {\n    return false\n  }\n}\n\nexport function toJNumber(num) {\n  if (num instanceof NumberPrim) {\n    return num.num\n  } else {\n    return Number(num)\n  }\n}\n\n// Converting JS prims to language primitives ---------------------------------\n\nexport function toLString(str) {\n  return new StringPrim(str)\n}\n\nexport function toLBoolean(bool) {\n  return new BooleanPrim(bool)\n}\n\nexport function toLNumber(num) {\n  return new NumberPrim(num)\n}\n\nexport function toLObject(data) {\n  let obj = new LObject()\n  for (let key in data) {\n    set(obj, key, data[key])\n  }\n  return obj\n}\n\n// Tree parsing stuff ---------------------------------------------------------\n\nexport function searchTreeFor(innerTree, searchFor, reject) {\n  for (let treeNode of innerTree) {\n    if (equal(treeNode, searchFor)) {\n      return true\n    }\n  }\n  for (let treeNode of innerTree.filter(n => n instanceof Array)\n        .filter(n => !(reject ? reject(n) : false))) {\n    if (searchTreeFor(treeNode, searchFor, reject)) {\n      return true\n    }\n  }\n  return false\n}\n\n// Call function --------------------------------------------------------------\n\nexport async function call(fn, args) {\n  return await fn['__call__'](args)\n}\n\nexport async function defaultCall(fnToken, args) {\n  if (fnToken.fn instanceof Function) {\n    // it's a javascript function so just call it\n    const argumentValues = []\n    for (let argument of args) {\n      argumentValues.push(await interp.evaluateExpression(\n        argument, fnToken.argumentScope))\n    }\n    return fnToken.fn(argumentValues)\n  } else {\n    // Might this function return anything? We can tell by if the `return`\n    // variable is referenced anywhere within the function's code. If so we\n    // need to do all sorts of promise-y things.\n    //\n    // Of course, this is all very hacky, and we would be better off using an\n    // \"async {}\" asynchronous function syntax...\n    /*\n    const isAsynchronous = searchTreeFor(\n      fnToken.fn, ['VARIABLE_IDENTIFIER', 'return'],\n      // New function literals get a new return, so ignore those\n      n => n[0] === 'FUNCTION_PRIM')\n    console.log('test:', isAsynchronous)\n    */\n    const isAsynchronous = fnToken.isAsynchronous\n\n    // Asynchronous things\n    let resolve\n    const donePromise = new Promise(function(_resolve) {\n      resolve = _resolve\n    })\n\n    // Not asynchronous things\n    let returnValue = null\n\n    const scope = Object.assign({}, fnToken.scopeVariables)\n    scope.return = new Variable(new LFunction(function([val]) {\n      if (isAsynchronous) {\n        resolve(val)\n      } else {\n        returnValue = val\n      }\n    }))\n    const paramaters = fnToken.paramaterList\n    for (let i = 0; i < paramaters.length; i++) {\n      const value = args[i]\n      const paramater = paramaters[i]\n      if (paramater.type === 'normal') {\n        const evaluatedValue = await interp.evaluateExpression(value)\n        scope[paramater.name] = new Variable(evaluatedValue)\n      } else if (paramater.type === 'unevaluated') {\n        scope[paramater.name] = new Variable(new LFunction(async function() {\n          return await interp.evaluateExpression(value, fnToken.argumentScope)\n        }))\n      }\n    }\n\n    // Shorthand functions.. these aren't finished! They don't work with the\n    // whole async stuff. I think.\n    if (fnToken.isShorthand) {\n      return await interp.evaluateExpression(fnToken.fn, scope)\n    } else {\n      await interp.evaluateEachExpression(scope, fnToken.fn)\n      if (isAsynchronous) {\n        return await donePromise\n      } else {\n        return returnValue\n      }\n    }\n  }\n}\n\n// Has function ---------------------------------------------------------------\n\nexport function has(obj, key) {\n  return key in obj\n}\n\n// Get function ---------------------------------------------------------------\n\nexport function get(obj, key) {\n  return obj['__get__'](key)\n}\n\nexport function defaultGet(obj, key) {\n  let keyString = toJString(key)\n  if (keyString in obj.data) {\n    return obj.data[keyString]\n  } else {\n    let constructor = obj['__constructor__']\n    let prototype = constructor['__prototype__']\n    let current = constructor\n    while (current && prototype && !(key in prototype)) {\n      current = current['__super__']\n      prototype = current ? current['__prototype__'] : null\n    }\n    if (current) {\n      let value = prototype[keyString]\n      if (value instanceof LFunction) {\n        // I was going to just bind to obj, but that generally involves using\n        // the oh so terrible `this`.\n        // Instead it returns a function that calls the given function with\n        // obj as the first paramater.\n        return new LFunction(function(...args) {\n          return value.fn(obj, ...args)\n        })\n      }\n      return value\n    }\n  }\n}\n\n// Set function ---------------------------------------------------------------\n\nexport function set(obj, key, value) {\n  return obj['__set__'](key, value)\n}\n\nexport function defaultSet(obj, key, value) {\n  return obj.data[toJString(key)] = value\n}\n\n// Variable class -------------------------------------------------------------\n// * this should never *ever* be accessed through anywhere except set/get\n//   Variable functions\n// * takes one paramater, value, which is stored in inst.value and represents\n//   the value of the Variable\nexport class Variable {\n  constructor(value) {\n    this.value = value\n  }\n\n  toString() {\n    return '<Variable>'\n  }\n}\n\n// Base token class -----------------------------------------------------------\n// * doesn't do anything on its own\n// * use x instanceof Token to check if x is any kind of token\n\nexport class Token {\n  constructor() {}\n}\n\n// Object token class ---------------------------------------------------------\n\nexport class LObject extends Token {\n  constructor() {\n    super()\n    this.data = {}\n    this['__constructor__'] = LObject\n  }\n\n  __get__(key) {\n    return defaultGet(this, key)\n  }\n\n  __set__(key, value) {\n    return defaultSet(this, key, value)\n  }\n}\n\nexport class LArray extends LObject {\n  constructor() {\n    super()\n    this['__constructor__'] = LArray\n    this.data.length = 0\n  }\n}\n\n// Function token class -------------------------------------------------------\n// [[this needs to be rewritten]]\n// * takes one paramater, fn, which is stored in inst.fn and represents the\n//     function that will be called\n// * you can also set scopeVariables (using setScopeVariables), which is\n//     generally only used for internal creation of function expressions; it\n//     represents the closure Variables that can be accessed from within the\n//     function\n// * you can also set fnArguments (using setArguments), which is generally also\n//     only used for internal creation of function expressions; it tells what\n//     call arguments should be mapped to in the Variables context of running\n//     the code block\n// * use inst.__call__ to call the function (with optional arguments)\n\nexport class LFunction extends LObject {\n  constructor(fn, asynchronous) {\n    super()\n    this['__constructor__'] = LFunction\n    this.fn = fn\n    this.scopeVariables = null\n\n    this.unevaluatedArgs = []\n    this.normalArgs = []\n    if (asynchronous) this.isAsynchronous = true\n  }\n\n  __call__(args) {\n    // Call this function. By default uses defaultCall, but can be overriden\n    // by subclasses.\n    return defaultCall(this, args)\n  }\n\n  setScopeVariables(scopeVariables) {\n    this.scopeVariables = scopeVariables\n  }\n\n  setParamaters(paramaterList) {\n    this.paramaterList = paramaterList\n  }\n\n  toString() {\n    return '<Function>'\n  }\n}\n\nexport class LEnvironment {\n  constructor() {\n    this['__constructor__'] = LEnvironment\n    this.vars = {}\n  }\n\n  addVars(variables) {\n    for (const name of Object.getOwnPropertyNames(variables)) {\n      this.vars[name] = variables[name]\n    }\n  }\n\n  __set__(variableName, value) {\n    this.vars[variableName] = new Variable(value)\n  }\n\n  __get__(variableName) {\n    return this.vars[variableName].value\n  }\n\n  toString() {\n    return JSON.stringify(Object.keys(this.vars))\n  }\n}\n\n// ETC. that requires above definitions ---------------------------------------\n\nexport let LObjectPrototype = {}\n\nexport let LArrayPrototype = {\n  push: new LFunction(function(self, what) {\n    self.data[self.data.length] = what\n    self.data.length = self.data.length + 1\n  }),\n  pop: new LFunction(function(self) {\n    delete self.data[self.data.length - 1]\n    self.data.length = self.data.length - 1\n  })\n}\n\nexport let LFunctionPrototype = {\n  debug: new LFunction(function(self) {\n    console.log('** DEBUG **')\n    console.log(self.fn.toString())\n  })\n}\n\nLObject['__prototype__'] = LObjectPrototype\nLObject['__super__'] = null\n\nLArray['__prototype__'] = LArrayPrototype\nLArray['__super__'] = LObject\n\nLFunction['__prototype__'] = LFunctionPrototype\nLFunction['__super__'] = LObject\n","const nearley = require('nearley')\nconst grammar = require('./grammar')\nconst interp = require('./interp')\nconst chalk = require('chalk')\n\nexport async function run(code, dir) {\n  let parser = new nearley.Parser(grammar.ParserRules, grammar.ParserStart)\n  let asts\n\n  try {\n    asts = parser.feed(code).results\n  } catch (e) {\n    // there's been a syntax error :(\n\n    let line = 1\n    let lines = code.split('\\n')\n    lines.unshift('')\n    for (let i = 0; i < e.offset; i++) {\n      let char = code[i]\n      if (char == '\\n') line++\n    }\n\n    let ln = lines[line]\n\n    if (line - 1 > 0) console.log(chalk.bold(line - 1), lines[line - 1])\n    if (line) console.log(chalk.bold(line), chalk.red(ln))\n    if (line + 1 < lines.length) console.log(chalk.bold(line + 1), lines[line + 1])\n    throw new Error(chalk.red(`\\nSyntax Error at ${chalk.cyan(`line ${line}`)}!`))\n  }\n\n  if (asts.length > 1) {\n    console.warn(chalk.red.bold('!! AMBIGUOUS SYNTAX !!'))\n    let escape = String.fromCharCode(27)\n    asts.forEach(function(ast, i) {\n      console.warn(JSON.stringify(ast, null, 0))\n      console.warn('\\n----------------------------\\n')\n    })-\n    console.warn(chalk.yellow(`\nA total of ${chalk.cyan(asts.length)} ASTs were generated.\nPlease report this on the official issue tracker:\nhttps://github.com/liam4/tlnccuwagnf/issues\nUsing first AST.\n`))\n  }\n\n  let result = await interp.interp(asts[0], dir)\n  return result\n}\n","'use strict'\n\nconst equal = require('deep-equal')\nconst chalk = require('chalk')\nconst run = require('../req.js')\nconst oldLog = console.log\n\nlet passed = 0\nlet tests = 0\n\nconst area = function(title) {\n  console.log('\\n   ' + chalk.bold(title) + ' ' + '-'.repeat(30 - title.length))\n}\n\nconst test = function(code, assume, title) {\n  title = (title || code).toLowerCase()\n  tests++\n  const out = []\n  console.log = function(...args) {\n    out.push(args)\n  }\n  chalk.enabled = false\n  const promise = run(code, __dirname, true)\n  promise.then(function() {\n    chalk.enabled = true\n    console.log = oldLog\n    if (!assume(out)) {\n      oldLog(chalk.red(' ✗ ' + (title)))\n      oldLog(out)\n    } else {\n      passed++\n      oldLog(chalk.green(' ✓ ' + (title)))\n    }\n  })\n  return promise\n}\n\nconst checkOut = function(compare) {\n  // this should be called like this:\n  // test(code, checkOut`compareThis`)\n  // or like this:\n  // test(code, checkOut(compareThese))\n\n  return function(result) {\n    return equal(result[0], compare)\n  }\n}\n\nconsole.time('Total tests time');\n// semicolon so that it doesn't think console.time(...)(async function...)\n\n(async function() {\n  try {\n    area('Print')\n    // Test print output\n    await test(`print(\"hello!\");`, checkOut`hello!`, 'basic usage')\n    // Test print with multiple arguments\n    await test(`print(\"hello\", \"world\");`, checkOut([`hello`, `world`]), 'Multiple Arguments')\n    await test(`print({}, 123.456);`, checkOut([`function`, `123.456`]), 'Types')\n\n    /* Commented this out. It works because of this grammar definition:\n     * _Program -> ...\n     *           | ...\n     *           | Command\n     * So a program can be a single command -- that's why this works.\n     */\n    /*\n    try {\n      // WHY IS THIS WORKING!?!?!?!?!?!??\n      test('print(\"hello! this should not work!\")\\n', checkOut`hello! this should not work!`)\n    } catch (err) {\n      console.log('Newline as separator doesn\\'t work, but it hasn\\'t been' +\n                  'implemented yet so that\\'s okay.')\n    }\n    */\n    // Test single quoted string\n    area('Strings')\n    await test(`print('single quoted');`, checkOut`single quoted`, 'Single Quotes')\n    await test(`print(concat(\"foo\", \"bar\"));`, checkOut`foobar`, 'Double Quotes')\n\n    area('String Escapes')\n    await test(`print('single quoted \\\\'escape');`, checkOut`single quoted 'escape`, 'Single Quotes')\n    await test(`print(\"double quoted \\\\\"escape\");`, checkOut`double quoted \"escape`, 'Double Quotes')\n    await test(`print('newline\\\\\\nescape');`, checkOut`newline\\nescape`, 'Newline')\n    await test(`print('escape \\\\\\\\escape');`, checkOut`escape \\\\escape`, 'Backslash')\n    await test(`print('\\\\'single\\\\' and \\\\\"double\\\\\"')`, checkOut`'single' and \"double\"`, 'Single & Double Quotes')\n\n    area('Math')\n    // Test basic math operator functions\n    await test(`print(+(3, 4));`, checkOut`7`, '+ add')\n    await test(`print(-(3, 4));`, checkOut`-1`, '- subtract')\n    await test(`print(*(3, 4));`, checkOut`12`, '* multiply')\n    await test(`print(/(3, 4));`, checkOut`0.75`, '/ divide')\n    // Test decimals\n    await test(`print(+(1.25, 1.755));`, checkOut`3.005`, '  decimals')\n\n    area('Conditionals')\n    // Test basic if\n    await test(`\n    if(true, {\n      print(\"good\");\n    });`, checkOut`good`, 'if')\n    // Test ifel (if condition do this; otherwise do that)\n    await test(`\n    ifel(false, {\n      print(\"bad\");\n    }, {\n      print(\"good\");\n    });`, checkOut`good`, 'ifel')\n    // Test else-code as optional argument to if\n    await test(`\n    if(false, {\n      print(\"bad\");\n    }, {\n      print(\"good\");\n    });`, checkOut`good`, 'else')\n\n    area('Logic & Comparison')\n    // Test logic operator functions\n    await test(`print(and(true, false));`, checkOut`false`, '& and')\n    await test(`print(or(true, false));`, checkOut`true`, '| or')\n    await test(`print(not(true), not(false));`, checkOut([`false`, 'true']), '! not')\n    // Test comparison operator functions\n    await test(`print(eq(10, 20), eq(45, 45));`, checkOut([`false`, `true`]), '= eq')\n    await test(`print(lt(10, 20), lt(70, 30), lt(45, 45));`, checkOut([`true`, `false`, `false`]), '< lt')\n    await test(`print(gt(10, 20), gt(70, 30), gt(45, 45));`, checkOut([`false`, `true`, `false`]), '> gt')\n\n    area('Surround Functions')\n    await test(`print((true and false), (true & true), (99 + 1), (1 - 1), (20 > 1))`, checkOut([\n      `false`,\n      `true`,\n      `100`,\n      `0`,\n      `true`\n    ]), 'basic usage')\n    await test(`print(('this' concat 'is' 'awesome'))`, checkOut`thisisawesome`, 'tertiary argument')\n\n    area('Variables')\n    await test(`foo => 'bar'; print(foo);`, checkOut`bar`, 'assigning & accessing')\n     await test(`foo => 'bar'; foo -> 'baz'; print(foo);`, checkOut`baz`, 'changing')\n\n  } catch (error) {\n    console.log = oldLog\n    console.log('\\x1b[31m[Errored!]\\x1b[0m Error in JS:')\n    console.error(error)\n  }\n  console.log('\\n');\n  console.timeEnd('Total tests time')\n  console.log(chalk.bold(`${passed}/${tests} tests passed.`))\n\n  if(passed < tests) process.exit(1)\n}())\n","const lib = require('../lib')\n\nexport let lol = new lib.LFunction(function() {\n  console.log('Lololol!')\n  return lib.toLNumber(1337)\n})\n","const lib = require('../lib')\nconst http = require('http')\nconst https = require('https')\nconst url = require('url')\n\nexport class LHTTPServerResponse extends lib.LObject {\n  constructor(res) {\n    super()\n    this['__constructor__'] = LHTTPServerResponse\n    this.res = res\n  }\n}\n\nlet LHTTPServerResponsePrototype = {\n  write: new lib.LFunction(function(self, [what]) {\n    self.res.write(lib.toJString(what))\n  }),\n  end: new lib.LFunction(function(self) {\n    self.res.end()\n  })\n}\n\nLHTTPServerResponse['__prototype__'] = LHTTPServerResponsePrototype\nLHTTPServerResponse['__super__'] = lib.LObject\n\nexport class LHTTPServerRequest extends lib.LObject {\n  constructor(req) {\n    super()\n    this['__constructor__'] = LHTTPServerRequest\n    this.req = req\n  }\n}\n\nlet LHTTPServerRequestPrototype = {\n  url: new lib.LFunction(function(self) {\n    return lib.toLString(self.req.url)\n  }),\n  method: new lib.LFunction(function(self) {\n    return lib.toLString(self.req.method)\n  })\n}\n\nLHTTPServerRequest['__prototype__'] = LHTTPServerRequestPrototype\nLHTTPServerRequest['__super__'] = lib.LObject\n\nexport class LHTTPServer extends lib.LObject {\n  constructor(handle) {\n    super()\n    this['__constructor__'] = LHTTPServer\n\n    this.server = http.createServer(function(req, res) {\n      lib.call(handle, [\n        new LHTTPServerRequest(req), new LHTTPServerResponse(res)])\n    })\n  }\n}\n\nlet LHTTPServerPrototype = {\n  listen: new lib.LFunction(function(self, [port]) {\n    port = lib.toJNumber(port)\n    self.server.listen(port)\n  })\n}\n\nLHTTPServer['__prototype__'] = LHTTPServerPrototype\nLHTTPServer['__super__'] = lib.LObject\n\nexport class LHTTPRequest extends lib.LObject {\n  constructor(method, url, callback) {\n    super()\n    this['__constructor__'] = LHTTPRequest\n    this.method = method\n    this.url = url\n    this.cb = callback\n  }\n}\n\n\nlet LHTTPRequestPrototype = {\n  send: new lib.LFunction(function(self) {\n    let handle = function(response) {\n      let body = ''\n      response.setEncoding('utf8')\n      response.on('data', function(d) {\n        body += d.toString()\n      })\n      response.on('end', function() {\n        lib.call(self.cb, [lib.toLString(body)])\n      })\n    }\n\n    let u = url.parse(lib.toJString(self.url))\n    let isGet = lib.toJString(self.method).toLowerCase() === 'get'\n    if (u.protocol === 'http:') {\n      if (isGet) {\n        http.get(lib.toJString(self.url), handle)\n      } else {\n        console.log('Invalid method:', lib.toJString(self.method))\n      }\n    } else if (u.protocol === 'https:') {\n      if (isGet) {\n        https.get(lib.toJString(self.url), handle)\n      } else {\n        console.log('Invalid method:', lib.toJString(self.method))\n      }\n    } else {\n      console.log('Invalid protocol:', u.protocol)\n    }\n  })\n}\n\nLHTTPRequest['__prototype__'] = LHTTPRequestPrototype\nLHTTPRequest['__super__'] = lib.LObject\n\nexport let server = new lib.LFunction(function([handle]) {\n  return new LHTTPServer(handle)\n})\n\nexport let request = new lib.LFunction(function([method, url, callback]) {\n  return new LHTTPRequest(method, url, callback)\n})\n"],"sourceRoot":"/source/"}